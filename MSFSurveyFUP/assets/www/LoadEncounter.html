<!DOCTYPE html>
<html>
<head>

<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">

<title>MSF Form</title>
<link href="css/jquery.mobile-1.3.1.min.css" rel="stylesheet"
	type="text/css" />
<link href="css/msf_form.css" rel="stylesheet" type="text/css" />

<link href="css/mobiscroll.jqm.css" rel="stylesheet" type="text/css" />
<link href="css/mobiscroll.core.css" rel="stylesheet" type="text/css" />

<script src="js/lib/cordova-2.7.0.js" type="text/javascript"></script>

<script src="js/lib/jquery-1.8.2.js" type="text/javascript"></script>
<script src="js/lib/jquery.mobile-1.3.1.min.js" type="text/javascript"></script>

<script src="js/lib/mobiscroll.core.js" type="text/javascript"></script>
<script src="js/lib/mobiscroll.jqm.js" type="text/javascript"></script>
<script src="js/lib/mobiscroll.datetime.js" type="text/javascript"></script>
<script src="js/lib/i18n/mobiscroll.i18n.fr.js" type="text/javascript"></script>

<script src="js/lib/lodash.js" type="text/javascript"></script>
<script src="js/lib/backbone.js" type="text/javascript"></script>
<script src="js/lib/backbone.localStorage.js" type="text/javascript"></script>

<script src="js/LoadEncounter.js" type="text/javascript"></script>


</head>

<body>
	<div data-role="page" data-theme="c">
		<div data-role="header">
			<h3>Load Encounter</h3>
		</div>
		<div data-role="content">
			<div id="formSelectContainer" data-role="fieldcontain">
			</div>
			<hr>
			<div id="encounterList" data-role="fieldcontain"></div>
		</div>
		<div data-role="footer"></div>
	</div>


<script id='tmpl-encounterList' type='text/template'>
<ul id="formSelect" data-role="listview" data-filter="true">
	<% for (var i = 0; i < encounterFiles.length; i++) { %>
		<% var d = new Date(encounterFiles[i].lastSaved);
  		var curr_date = d.getDate();
    	var curr_month = d.getMonth() + 1;
    	var curr_year = d.getFullYear();
		var dateString = curr_date + "-" + curr_month + "-" + curr_year; %>
		<li><a href="Form.html?formFilePath=js/forms/<%=encounterFiles[i].formName %>.json&encounter=<%= encounterFiles[i].fileName %>" data-ajax="false"><%= encounterFiles[i].formNameReadable %><br>Date: <%= dateString %></a></li>
	<% } %>
</ul>
</script>

<script id='tmpl-formSelect' type='text/template'>
<div id="formSelectContainer" data-role="fieldcontain">
	<label for="formSelect">Choisissez une forme:</label>
	<select name="formSelect" id="formSelect">
		<% for (var i = 0; i < forms.length; i++) { %>
			<option value="<%= forms[i].name %>"><%= forms[i].nameReadable %></option>
		<% } %>
	</select>
</div>
</script>

</body>

</html>